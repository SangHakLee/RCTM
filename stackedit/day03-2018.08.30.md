

이미지 생성
```bash
$ virt-builder --size 20G --format raw --root-password password:openstack -o /var/lib/libvirt/images/osp-ansible.qcow2 centos-7.5

$ virt-builder --size 20G --format raw --root-password password:openstack -o /var/lib/libvirt/images/osp-compute.qcow2 centos-7.5

$ virt-builder --size 20G --format raw --root-password password:openstack -o /var/lib/libvirt/images/osp-control.qcow2 centos-7.5
```

> 위의 3개 모두 빈 파일이고 같은 스펙이기 때문에 하나의 이미지를 복사해서 이름만 변경해도 된다.

#### ovs 네트워크 확인
```bash
$ ovs-vsctl show
```
- `qg` - 게이트웨이
- `qr` - 라우터

#### glance 확인
```bash
$ cd /etc/glance
$ grep -E -v '^$|^#' glance-api.conf 
```

#### glance 상태 확인
```bash
~(keystone_admin)]$ openstack-service status glance
```
```bash
MainPID=1190 Id=openstack-glance-api.se인rvice ActiveState=active
MainPID=1296 Id=openstack-glance-registry.service ActiveState=active
```
- `openstack-glance-api.service` -API
- `openstack-glance-registry.service` - 파일 분석, DB 저장

> **glance의 문제**
> glance의 이미지 파일은 `/var/lib/glance/images`에 저장된다.
> 만약, `$ mv /var/lib/glance/images/* /tmp/` 명령어로 이미지 파일을 전체 이동하면 어떻게 될까?
> 
> `$ openstack image list`로 조회하면 
<!--stackedit_data:
eyJoaXN0b3J5IjpbMzA5ODUxMDMyLDkwNzU0ODE3NiwtMTk1OT
UzNzE3OSwxMzQ3MTQ3MDU5LC0yMDg4NzQ2NjEyLDczMDk5ODEx
Nl19
-->